<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Learn how you can use Infrastructure as Code</title>
    <meta name="description" content="[object Object]">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.1759c940.css" as="style"><link rel="preload" href="/assets/js/app.509e587f.js" as="script"><link rel="preload" href="/assets/js/9.454b5262.js" as="script"><link rel="preload" href="/assets/js/4.eac68367.js" as="script"><link rel="preload" href="/assets/js/132.5905a839.js" as="script"><link rel="prefetch" href="/assets/js/1.36663999.js"><link rel="prefetch" href="/assets/js/10.dd884694.js"><link rel="prefetch" href="/assets/js/100.f7776fae.js"><link rel="prefetch" href="/assets/js/101.68dfa287.js"><link rel="prefetch" href="/assets/js/102.c2419951.js"><link rel="prefetch" href="/assets/js/103.005176e9.js"><link rel="prefetch" href="/assets/js/104.ad6ac0a2.js"><link rel="prefetch" href="/assets/js/105.5e05c250.js"><link rel="prefetch" href="/assets/js/106.d1698fcc.js"><link rel="prefetch" href="/assets/js/107.39206cda.js"><link rel="prefetch" href="/assets/js/108.b717e412.js"><link rel="prefetch" href="/assets/js/109.a0275c41.js"><link rel="prefetch" href="/assets/js/11.3a1297a4.js"><link rel="prefetch" href="/assets/js/110.acd428a7.js"><link rel="prefetch" href="/assets/js/111.b728f009.js"><link rel="prefetch" href="/assets/js/112.3ba0cc1f.js"><link rel="prefetch" href="/assets/js/113.30083b82.js"><link rel="prefetch" href="/assets/js/114.a601f1c2.js"><link rel="prefetch" href="/assets/js/115.6cbd4799.js"><link rel="prefetch" href="/assets/js/116.44cdb765.js"><link rel="prefetch" href="/assets/js/117.f22ffed2.js"><link rel="prefetch" href="/assets/js/118.fda8edf7.js"><link rel="prefetch" href="/assets/js/119.1ea9eae7.js"><link rel="prefetch" href="/assets/js/12.02e6e552.js"><link rel="prefetch" href="/assets/js/120.cf073939.js"><link rel="prefetch" href="/assets/js/121.dc2e4d8b.js"><link rel="prefetch" href="/assets/js/122.8c8e3a61.js"><link rel="prefetch" href="/assets/js/123.ecb23c61.js"><link rel="prefetch" href="/assets/js/124.1e416617.js"><link rel="prefetch" href="/assets/js/125.e405a06b.js"><link rel="prefetch" href="/assets/js/126.dc6e1538.js"><link rel="prefetch" href="/assets/js/127.1a4d6785.js"><link rel="prefetch" href="/assets/js/128.57fa7d16.js"><link rel="prefetch" href="/assets/js/129.57ea763a.js"><link rel="prefetch" href="/assets/js/13.03c08972.js"><link rel="prefetch" href="/assets/js/130.62aa76ba.js"><link rel="prefetch" href="/assets/js/131.95317630.js"><link rel="prefetch" href="/assets/js/133.31e8ece5.js"><link rel="prefetch" href="/assets/js/134.8942c410.js"><link rel="prefetch" href="/assets/js/135.28ac6845.js"><link rel="prefetch" href="/assets/js/136.fa8c6434.js"><link rel="prefetch" href="/assets/js/137.afa1f455.js"><link rel="prefetch" href="/assets/js/138.86e59e71.js"><link rel="prefetch" href="/assets/js/139.f759c61e.js"><link rel="prefetch" href="/assets/js/14.1a060010.js"><link rel="prefetch" href="/assets/js/140.b91b86f6.js"><link rel="prefetch" href="/assets/js/141.e6ca1ba8.js"><link rel="prefetch" href="/assets/js/142.17143dc7.js"><link rel="prefetch" href="/assets/js/143.a6fec7d2.js"><link rel="prefetch" href="/assets/js/144.3bc3648b.js"><link rel="prefetch" href="/assets/js/145.aece70d0.js"><link rel="prefetch" href="/assets/js/146.bad2e432.js"><link rel="prefetch" href="/assets/js/147.4775178c.js"><link rel="prefetch" href="/assets/js/148.255d1e0a.js"><link rel="prefetch" href="/assets/js/149.a33263c4.js"><link rel="prefetch" href="/assets/js/15.34674cd6.js"><link rel="prefetch" href="/assets/js/150.5a7f8899.js"><link rel="prefetch" href="/assets/js/151.30a5ae9d.js"><link rel="prefetch" href="/assets/js/152.1069f6c2.js"><link rel="prefetch" href="/assets/js/153.7eaed6c8.js"><link rel="prefetch" href="/assets/js/154.f5e761e3.js"><link rel="prefetch" href="/assets/js/155.6c1cd07d.js"><link rel="prefetch" href="/assets/js/156.042e4d78.js"><link rel="prefetch" href="/assets/js/157.ce70581c.js"><link rel="prefetch" href="/assets/js/158.e45988a1.js"><link rel="prefetch" href="/assets/js/159.76d25d75.js"><link rel="prefetch" href="/assets/js/16.119e91d4.js"><link rel="prefetch" href="/assets/js/160.aa9b504d.js"><link rel="prefetch" href="/assets/js/161.71318bd8.js"><link rel="prefetch" href="/assets/js/162.c8cea25d.js"><link rel="prefetch" href="/assets/js/163.a7833ee3.js"><link rel="prefetch" href="/assets/js/164.cfcdc3fa.js"><link rel="prefetch" href="/assets/js/165.2f27e3c1.js"><link rel="prefetch" href="/assets/js/166.20ee8421.js"><link rel="prefetch" href="/assets/js/167.44536460.js"><link rel="prefetch" href="/assets/js/168.f96ee973.js"><link rel="prefetch" href="/assets/js/169.09014641.js"><link rel="prefetch" href="/assets/js/17.780050f1.js"><link rel="prefetch" href="/assets/js/170.e4cdc9ba.js"><link rel="prefetch" href="/assets/js/171.39f16573.js"><link rel="prefetch" href="/assets/js/172.8e103d5a.js"><link rel="prefetch" href="/assets/js/173.94707fa7.js"><link rel="prefetch" href="/assets/js/174.0adca6b5.js"><link rel="prefetch" href="/assets/js/175.f4a1deab.js"><link rel="prefetch" href="/assets/js/176.cf5fbb5b.js"><link rel="prefetch" href="/assets/js/177.aa48f3b8.js"><link rel="prefetch" href="/assets/js/178.b32955d2.js"><link rel="prefetch" href="/assets/js/179.3869e998.js"><link rel="prefetch" href="/assets/js/18.6ebceaf1.js"><link rel="prefetch" href="/assets/js/180.2809655c.js"><link rel="prefetch" href="/assets/js/181.0b3f5da7.js"><link rel="prefetch" href="/assets/js/182.66078f0b.js"><link rel="prefetch" href="/assets/js/183.14d57c56.js"><link rel="prefetch" href="/assets/js/184.a87b1a02.js"><link rel="prefetch" href="/assets/js/185.b987c6e1.js"><link rel="prefetch" href="/assets/js/186.80dfd6fe.js"><link rel="prefetch" href="/assets/js/187.9e85ad4d.js"><link rel="prefetch" href="/assets/js/188.90581d2f.js"><link rel="prefetch" href="/assets/js/189.10a10400.js"><link rel="prefetch" href="/assets/js/19.910fc8d0.js"><link rel="prefetch" href="/assets/js/190.6d20610d.js"><link rel="prefetch" href="/assets/js/191.846582fc.js"><link rel="prefetch" href="/assets/js/192.df764c7c.js"><link rel="prefetch" href="/assets/js/193.42944620.js"><link rel="prefetch" href="/assets/js/194.38c50b13.js"><link rel="prefetch" href="/assets/js/195.7a74351d.js"><link rel="prefetch" href="/assets/js/196.ef5a9160.js"><link rel="prefetch" href="/assets/js/197.d8eb864b.js"><link rel="prefetch" href="/assets/js/198.fe3e5bd5.js"><link rel="prefetch" href="/assets/js/199.430d0b7e.js"><link rel="prefetch" href="/assets/js/20.f2e93d17.js"><link rel="prefetch" href="/assets/js/200.e191d521.js"><link rel="prefetch" href="/assets/js/201.b9725a58.js"><link rel="prefetch" href="/assets/js/202.29dec5af.js"><link rel="prefetch" href="/assets/js/203.c72e7565.js"><link rel="prefetch" href="/assets/js/21.8afea724.js"><link rel="prefetch" href="/assets/js/22.16b7f426.js"><link rel="prefetch" href="/assets/js/23.b4e38d6f.js"><link rel="prefetch" href="/assets/js/24.750257aa.js"><link rel="prefetch" href="/assets/js/25.2d1f0877.js"><link rel="prefetch" href="/assets/js/26.8b31cf1a.js"><link rel="prefetch" href="/assets/js/27.a4be0d12.js"><link rel="prefetch" href="/assets/js/28.fb60431b.js"><link rel="prefetch" href="/assets/js/29.08e9944c.js"><link rel="prefetch" href="/assets/js/3.970a66a4.js"><link rel="prefetch" href="/assets/js/30.ae297928.js"><link rel="prefetch" href="/assets/js/31.4fd0d93b.js"><link rel="prefetch" href="/assets/js/32.07e772d9.js"><link rel="prefetch" href="/assets/js/33.8045f864.js"><link rel="prefetch" href="/assets/js/34.dd14acf6.js"><link rel="prefetch" href="/assets/js/35.ccde8210.js"><link rel="prefetch" href="/assets/js/36.350691e2.js"><link rel="prefetch" href="/assets/js/37.59283e16.js"><link rel="prefetch" href="/assets/js/38.a612debc.js"><link rel="prefetch" href="/assets/js/39.18b0acf7.js"><link rel="prefetch" href="/assets/js/40.9601e440.js"><link rel="prefetch" href="/assets/js/41.390ffe47.js"><link rel="prefetch" href="/assets/js/42.28e92d87.js"><link rel="prefetch" href="/assets/js/43.669a8167.js"><link rel="prefetch" href="/assets/js/44.6fc9906e.js"><link rel="prefetch" href="/assets/js/45.3024117c.js"><link rel="prefetch" href="/assets/js/46.9edeab5a.js"><link rel="prefetch" href="/assets/js/47.fb12d4b7.js"><link rel="prefetch" href="/assets/js/48.52640be3.js"><link rel="prefetch" href="/assets/js/49.02a5f0f0.js"><link rel="prefetch" href="/assets/js/5.d1da013e.js"><link rel="prefetch" href="/assets/js/50.d3ddc342.js"><link rel="prefetch" href="/assets/js/51.2cf06978.js"><link rel="prefetch" href="/assets/js/52.e69de275.js"><link rel="prefetch" href="/assets/js/53.326a7442.js"><link rel="prefetch" href="/assets/js/54.e47e03a7.js"><link rel="prefetch" href="/assets/js/55.0b31ff36.js"><link rel="prefetch" href="/assets/js/56.e14027f4.js"><link rel="prefetch" href="/assets/js/57.949f3da5.js"><link rel="prefetch" href="/assets/js/58.efc75b17.js"><link rel="prefetch" href="/assets/js/59.7d734f7f.js"><link rel="prefetch" href="/assets/js/6.9bdf2d86.js"><link rel="prefetch" href="/assets/js/60.17850c9d.js"><link rel="prefetch" href="/assets/js/61.61f01cf6.js"><link rel="prefetch" href="/assets/js/62.e05700ec.js"><link rel="prefetch" href="/assets/js/63.4e7c77ba.js"><link rel="prefetch" href="/assets/js/64.01a84946.js"><link rel="prefetch" href="/assets/js/65.d2e52c68.js"><link rel="prefetch" href="/assets/js/66.7b53970b.js"><link rel="prefetch" href="/assets/js/67.6f7c9f8c.js"><link rel="prefetch" href="/assets/js/68.8d40a19e.js"><link rel="prefetch" href="/assets/js/69.c91e483d.js"><link rel="prefetch" href="/assets/js/7.9ac2367b.js"><link rel="prefetch" href="/assets/js/70.8f3a0f45.js"><link rel="prefetch" href="/assets/js/71.c8eba049.js"><link rel="prefetch" href="/assets/js/72.fab91def.js"><link rel="prefetch" href="/assets/js/73.397d73a0.js"><link rel="prefetch" href="/assets/js/74.5973a4fb.js"><link rel="prefetch" href="/assets/js/75.c2f96916.js"><link rel="prefetch" href="/assets/js/76.5628bac5.js"><link rel="prefetch" href="/assets/js/77.49a534d4.js"><link rel="prefetch" href="/assets/js/78.8e721008.js"><link rel="prefetch" href="/assets/js/79.7c744de7.js"><link rel="prefetch" href="/assets/js/8.6b13a443.js"><link rel="prefetch" href="/assets/js/80.faab0549.js"><link rel="prefetch" href="/assets/js/81.7b21d510.js"><link rel="prefetch" href="/assets/js/82.65bb49d8.js"><link rel="prefetch" href="/assets/js/83.38d82ae3.js"><link rel="prefetch" href="/assets/js/84.ba6c380e.js"><link rel="prefetch" href="/assets/js/85.257e871c.js"><link rel="prefetch" href="/assets/js/86.7f10146d.js"><link rel="prefetch" href="/assets/js/87.66375412.js"><link rel="prefetch" href="/assets/js/88.596bd09a.js"><link rel="prefetch" href="/assets/js/89.ceed231e.js"><link rel="prefetch" href="/assets/js/90.cb5b9f7e.js"><link rel="prefetch" href="/assets/js/91.4c76179c.js"><link rel="prefetch" href="/assets/js/92.f68b9b5c.js"><link rel="prefetch" href="/assets/js/93.12b74e69.js"><link rel="prefetch" href="/assets/js/94.87777679.js"><link rel="prefetch" href="/assets/js/95.7deabe56.js"><link rel="prefetch" href="/assets/js/96.bff3c86e.js"><link rel="prefetch" href="/assets/js/97.b6ad2632.js"><link rel="prefetch" href="/assets/js/98.9157217b.js"><link rel="prefetch" href="/assets/js/99.9fedc5bd.js">
    <link rel="stylesheet" href="/assets/css/0.styles.1759c940.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Learn how you can use Infrastructure as Code</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/azure-arm.html#references" class="sidebar-link">References</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/azure-arm.html#why-arm" class="sidebar-link">Why ARM</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/azure-arm.html#template-file-anatomy" class="sidebar-link">Template file anatomy</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/azure-arm.html#deployment-process" class="sidebar-link">Deployment process</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/azure-arm.html#organizing-your-templates" class="sidebar-link">Organizing your templates</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/azure-arm.html#your-first-deployment" class="sidebar-link">Your first deployment</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-first-deployment" class="sidebar-link">DEMO - first deployment</a></li></ul></li><li><a href="/pages/azure-arm.html#resources" class="sidebar-link">Resources</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-your-first-resource" class="sidebar-link">DEMO - your first resource</a></li></ul></li><li><a href="/pages/azure-arm.html#parameters" class="sidebar-link">Parameters</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-parameters" class="sidebar-link">DEMO - parameters</a></li><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#another-example" class="sidebar-link">Another example</a></li></ul></li><li><a href="/pages/azure-arm.html#template-functions" class="sidebar-link">Template functions</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-template-functions" class="sidebar-link">DEMO - template functions</a></li></ul></li><li><a href="/pages/azure-arm.html#variables" class="sidebar-link">Variables</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-variables" class="sidebar-link">DEMO variables</a></li></ul></li><li><a href="/pages/azure-arm.html#output" class="sidebar-link">Output</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/azure-arm.html#demo-output" class="sidebar-link">DEMO - output</a></li></ul></li><li><a href="/pages/azure-arm.html#summary" class="sidebar-link">Summary</a><ul class="sidebar-sub-headers"></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="learn-how-you-can-use-infrastructure-as-code"><a href="#learn-how-you-can-use-infrastructure-as-code" aria-hidden="true" class="header-anchor">#</a> Learn how you can use Infrastructure as Code</h1> <blockquote><p>TLDR; this article covers Infrastructure as Code and exemplifies it using ARM Templates and Azure CLI. This covers all the main parts of an ARM templates so although a bit long article it gives you a good foundation to learn more.</p></blockquote> <p>We moved to the Cloud. That means we need to rethink things. We already iterate a lot over code and update it as requirement changes. The division between OPS and DEV has disappeared. This means when we iterate, we not only do so on code but deploys and infrastructure.</p> <p>This means we need to know what we are deploying so we can deploy and redeploy often and accurately. We need to express our infrastructure as Code.</p> <p>Application code and infrastructure, expressed as code, can be stored in a Code repository. That means any member of the team can deploy app code as well as infrastructure.</p> <p>This is where ARM templates come in. ARM stands for <strong>A</strong>zure <strong>R</strong>esource <strong>M</strong>anager. The templates consist of JSON, JavaScript Object Notation.</p> <p>There are many formats out there for expressing your infrastructure as code. ARM templates is one format out of many. So why ARM templates?</p> <h2 id="references"><a href="#references" aria-hidden="true" class="header-anchor">#</a> References</h2> <ul><li><p><a href="https://docs.microsoft.com/azure/azure-resource-manager/templates/overview?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">ARM Overview<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Good overview page to learn more about ARM in general.</p></li> <li><p><a href="https://github.com/Azure/arm-ttk" target="_blank" rel="noopener noreferrer">Testing your template with arm-ttk<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Script that shows how you can test your template.</p></li> <li><p><a href="https://docs.microsoft.com/azure/azure-resource-manager/templates/template-deploy-what-if?tabs=azure-powershell&amp;wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">What-if function<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> A function allowing you to see what would happen if you were to try deploying this template.</p></li> <li><p><a href="https://docs.microsoft.com/azure/governance/policy/overview?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Policy as Code<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Policy as Code is a bog topic, learn more here.</p></li> <li><p><a href="https://docs.microsoft.com/azure/azure-resource-manager/templates/add-template-to-azure-pipelines?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">CI/CD for ARM templates<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Learn how to set up CI/CD or ARM templates.</p></li> <li><p><a href="https://marketplace.visualstudio.com/items?itemName=msazurermtools.azurerm-vscode-tools" target="_blank" rel="noopener noreferrer">Azure Resource Manager (ARM) Tools<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> Great extension tool that's a must have if you author ARM templates in VS code.</p> <p><img src="https://github.com/Microsoft/vscode-azurearmtools/raw/master/images/arm-tools.gif" alt="ARM Tools extension"></p></li></ul> <h2 id="why-arm"><a href="#why-arm" aria-hidden="true" class="header-anchor">#</a> Why ARM</h2> <p>There are a ton of reasons but primarily it's a first class citizen on Azure. That means it will support deploying most things on Azure. It also means there will be great tools for authoring and deploying and a lot of other things. Let's have a closer look on the <em>whys</em>:</p> <ul><li><p><strong>Declarative syntax</strong>, this is about telling what you want rather than how. So your entire infrastructure can be specified.</p></li> <li><p><strong>Repeatable results</strong>, there are couple of important things you get like <em>idempotency</em> - no matter how many times you deploy you get the same results.</p></li> <li><p><strong>Orchestration</strong>, the deployments are handled for you. For example if you have many things you need to deploy and some things depend on some other things to exist, you don't have to worry - things will be created in the correct order. There are also some smart things going on with the deployment itself such as things being deployed in parallel to speed things up. In short, it's all managed, just declare what you need.</p></li> <li><p><strong>Modularization</strong>, for some of you, what you have in the Cloud can be a really large complex things. To maintain it and structure it you might want to split up your deployment in many different files. With ARM you can do just that. ARM enables you have you deployment spread out over many small files and then have them linked together. It's also possible to list parts of your deployment inline, in a nested way.</p></li> <li><p><strong>Extensibility</strong>, your templates can be further extended using Powershell or Bash. The script can live inside the template or it can be an external resource.</p></li> <li><p><strong>Tools</strong>, there are many tools that helps you while authoring your template/s. Here are some:</p> <ul><li><p><strong>Testing</strong>, by using a toolkit like <em>arm-ttk</em>* you can test your template and ensure it follows all the guidelines and best practices. <em>arm-ttk</em> is a Powershell script that you can download from here:</p> <blockquote><p>https://github.com/Azure/arm-ttk</p></blockquote></li> <li><p><strong>Preview changes</strong>, another important thing is to know the impact of your deployment before you actually carry it out. There's a <em>what-if</em> operation you can run that helps you with just that. It checks your template and tells you what will happen were you to deploy it. You can find out more about it here:</p> <blockquote><p>https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/template-deploy-what-if?tabs=azure-powershell</p></blockquote></li> <li><p><strong>Built-in validation</strong>, regardless of whether you use Powershell or Azure-CLI there is a validation process that runs when you tell the tool you want to deploy. If any validation errors are found it won't carry out the deployment so you don't end up in an erronous state.</p></li> <li><p><strong>VS Code extensions</strong>, there is a VS Code extension that will help you with a lot of things concerning authoring. It provides snippets, auto completion, syntax highlighting and more - don't leave home without it ðŸ˜‰</p></li></ul></li> <li><p><strong>Tracked deployments</strong>, In the Azure portal, you can review the deployment history and get information about the template deployment. You can see the template that was deployed, the parameter values passed in, and any output values. Other infrastructure as code services aren't tracked through the portal.</p> <p><img src="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/media/overview/deployment-history.png" alt="Deployment history"></p></li> <li><p><strong>Policy as code</strong>, Azure Policy is a policy as code framework to automate governance. If you're using Azure policies, policy remediation is done on non-compliant resources when deployed through templates.</p> <blockquote><p>https://docs.microsoft.com/en-us/azure/governance/policy/overview</p></blockquote></li> <li><p><strong>CI/CD integration</strong>, it's possible to set up your templates to work with CI/CD tools like Azure DevOps.</p></li> <li><p><strong>Exportable code</strong>, even if you have deployed a resource already and not used an ARM template you can export it after the fact from the Azure portal.</p></li></ul> <h2 id="template-file-anatomy"><a href="#template-file-anatomy" aria-hidden="true" class="header-anchor">#</a> Template file anatomy</h2> <p>The Template file represents what you want to do, what resources to create/update/delete.</p> <p>Within your template, you can write template expressions that extend the capabilities of JSON. These expressions make use of the functions provided by Resource Manager. A Template has the following sections:</p> <ul><li><p><strong>Parameters</strong>, Provide values during deployment that allow the same template to be used with different environments.</p></li> <li><p><strong>Variables</strong>, Define values that are reused in your templates. They can be constructed from parameter values.</p></li> <li><p><strong>User-defined functions</strong>, Create customized functions that simplify your template.</p></li> <li><p><strong>Resources</strong>, Specify the resources to deploy.</p></li> <li><p><strong>Outputs</strong>, Return values from the deployed resources.</p></li></ul> <h2 id="deployment-process"><a href="#deployment-process" aria-hidden="true" class="header-anchor">#</a> Deployment process</h2> <p>When you deploy a template, Resource Manager converts the template into REST API operations.</p> <blockquote><p>template is converted to REST API calls.</p></blockquote> <p>For example, when Resource Manager receives a template with the following resource definition:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
  <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Microsoft.Storage/storageAccounts&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2016-01-01&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;mystorageaccount&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;westus&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Storage&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>Becomes:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>PUT
https://management.azure.com/subscriptions/<span class="token punctuation">{</span>subscriptionId<span class="token punctuation">}</span>/resourceGroups/<span class="token punctuation">{</span>resourceGroupName<span class="token punctuation">}</span>/providers/Microsoft.Storage/storageAccounts/mystorageaccount?api-version<span class="token operator">=</span>2016-01-01
REQUEST BODY
<span class="token punctuation">{</span>
  <span class="token string">&quot;location&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;westus&quot;</span>,
  <span class="token string">&quot;sku&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span>
    <span class="token string">&quot;name&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;Standard_LRS&quot;</span>
  <span class="token punctuation">}</span>,
  <span class="token string">&quot;kind&quot;</span><span class="token keyword">:</span> <span class="token string">&quot;Storage&quot;</span>,
  <span class="token string">&quot;properties&quot;</span><span class="token keyword">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><h2 id="organizing-your-templates"><a href="#organizing-your-templates" aria-hidden="true" class="header-anchor">#</a> Organizing your templates</h2> <p>You could have one giant template that deploys everything. But you could also divide it up into many files that represents a specific part of your set up.
You would then have one master template and the other templates be linked in.</p> <p><img src="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/media/overview/nested-tiers-template.png" alt="Master template"></p> <p>Or you can think of it in terms of lifecycles and depending on what it is, you would deploy it to different resource groups:</p> <p><img src="https://docs.microsoft.com/en-us/azure/azure-resource-manager/templates/media/overview/tier-templates.png" alt="Lifecycles"></p> <h2 id="your-first-deployment"><a href="#your-first-deployment" aria-hidden="true" class="header-anchor">#</a> Your first deployment</h2> <p>This is what a very basic ARM template looks like:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contentVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>It does not contain any resources. The <code>resources</code> array is empty. There are three properties of interest:</p> <ul><li><strong>$schema</strong>: Specifies the location of the JSON schema file. The schema file describes the properties that are available within a template. For example, the schema defines resources as one of the valid properties for a template. Don't worry that the date for the schema is 2019-04-01. This schema version is up-to-date and includes all of the latest features. The schema date hasn't been changed because there have been no breaking changes since its introduction.</li> <li><strong>contentVersion</strong>: Specifies the version of the template (such as 1.0.0.0). You can provide any value for this element. Use this value to document significant changes in your template. When deploying resources using the template, this value can be used to make sure that the right template is being used.</li> <li><strong>resources</strong>: Contains the resources you want to deploy or update. Currently, it's empty, but you'll add resources later.</li></ul> <h3 id="demo-first-deployment"><a href="#demo-first-deployment" aria-hidden="true" class="header-anchor">#</a> DEMO - first deployment</h3> <ol><li><p>Create a file <code>azuredeploy.json</code> and give it the following content:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contentVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li> <li><p>Sign in to azure through the terminal. Ensure you have Azure CLI installed and type:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az login
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Create a resource group, we need a resource group to deploy our template to. In the terminal type the following command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az group create \
--name arm-demo1 \
--location <span class="token string">&quot;Central US&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>It's time to deploy the template. We deploy it with the following command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>templateFile<span class="token operator">=</span><span class="token string">&quot;{provide-the-path-to-the-template-file}&quot;</span>
resourceGroup<span class="token operator">=</span><span class="token string">&quot;arm-demo1&quot;</span>
az deployment group create \
--name blanktemplate \
--resource-group <span class="token variable">$resourceGroup</span> \
--template-file <span class="token variable">$templateFile</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li> <li><p>Inspect results, in the terminal you should be getting a JSON response. Look for an attribute called <code>provisioningState</code>, it should have the value <code>Succeeded</code>.</p></li> <li><p>Verify in portal, go to <code>portal.azure.com</code></p> <ul><li>Select <code>Resource Groups</code></li> <li>Select the <code>myResourceGroup</code> resource.</li> <li>Click <code>Overview</code></li> <li>In the top right, click the <code>Deployments: 1 Succeeded</code>, you should now see a list of deployments.</li></ul></li> <li><p>Success !</p></li></ol> <h2 id="resources"><a href="#resources" aria-hidden="true" class="header-anchor">#</a> Resources</h2> <p>All resources goes into the <code>resources</code> property in your ARM template, it's of type array.</p> <h3 id="demo-your-first-resource"><a href="#demo-your-first-resource" aria-hidden="true" class="header-anchor">#</a> DEMO - your first resource</h3> <p>Let's create a new resource.</p> <ol><li><p>Open up <code>azuredeploy.json</code>, locate the <code>resources</code> array and add the following entry:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Microsoft.Storage/storageAccounts&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-04-01&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{provide-unique-name}&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eastus&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StorageV2&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;supportsHttpsTrafficOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li> <li><p>Run the following command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az deployment group create \
--name addstorage \
--resource-group arm-demo1 \
--template-file <span class="token variable">$templateFile</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div></li></ol> <h2 id="parameters"><a href="#parameters" aria-hidden="true" class="header-anchor">#</a> Parameters</h2> <p>You can use parameters in the template. The point with parameters is that you can take arguments from the outside as input arguments to your deploy script. These arguments can then be applied throughout the templates. You need to add the property <code>parameters</code> at root level.</p> <h3 id="demo-parameters"><a href="#demo-parameters" aria-hidden="true" class="header-anchor">#</a> DEMO - parameters</h3> <ol><li><p>Open up your ARM template and add a section like this at root level:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;storageName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
    <span class="token property">&quot;minLength&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
    <span class="token property">&quot;maxLength&quot;</span><span class="token operator">:</span> <span class="token number">24</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div></li> <li><p>Locate your <code>resources</code> array and it's first item looking like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Microsoft.Storage/storageAccounts&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-04-01&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;{provide-unique-name}&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eastus&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StorageV2&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;supportsHttpsTrafficOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
 <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p>and change its <code>name</code> property like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageName')]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Above we are adding the parameter <code>storageName</code>. This means that when we now run our create deployment script we can add an argument to it looking like so:</p></li> <li><p>Deployment, the deployment can now set the <code>storageName</code> value by specifying it using the <code>--parameters</code>, like so:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>--parameters storageName<span class="token operator">=</span><span class="token punctuation">{</span>your-unique-name<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>A full deployment creation script would then look like so:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az deployment group create \
  --name addnameparameter \
  --resource-group arm-demo1 \
  --template-file azure-parameter.json \
  --parameters storageName<span class="token operator">=</span>chrisstorageuniquename
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>In the last row above we assign the value <code>chrisstorageuniquename</code> to our <code>storageName</code> parameter. This value will then be applied throughout the template.</p></li></ol> <h3 id="another-example"><a href="#another-example" aria-hidden="true" class="header-anchor">#</a> Another example</h3> <ol><li><p><strong>Add a new parameter</strong>, add the following to the <code>parameters</code> section:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;storageSKU&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;allowedValues&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_GRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_RAGRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_ZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Premium_LRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Premium_ZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_GZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_RAGZRS&quot;</span>
     <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>Now we are using the property <code>allowedValues</code> to say what values are ok to set. We also get the flexibility to set SKUs differently in different environments. Note also how we set the property <code>defaultValue</code>. This means we don't have to set <code>storageSKU</code> if we don't want to, but we can override the default value by passing an input argument from the terminal.</p> <p>Your ARM template should look like this:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
 <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;contentVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0.0&quot;</span><span class="token punctuation">,</span>
 <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
   <span class="token property">&quot;storageName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;minLength&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
     <span class="token property">&quot;maxLength&quot;</span><span class="token operator">:</span> <span class="token number">24</span>
   <span class="token punctuation">}</span><span class="token punctuation">,</span>
   <span class="token property">&quot;storageSKU&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
     <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;allowedValues&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
       <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_GRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_RAGRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_ZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Premium_LRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Premium_ZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_GZRS&quot;</span><span class="token punctuation">,</span>
       <span class="token string">&quot;Standard_RAGZRS&quot;</span>
     <span class="token punctuation">]</span>
   <span class="token punctuation">}</span>
 <span class="token punctuation">}</span><span class="token punctuation">,</span>
 <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
   <span class="token punctuation">{</span>
     <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Microsoft.Storage/storageAccounts&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-04-01&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageName')]&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;eastus&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageSKU')]&quot;</span>
     <span class="token punctuation">}</span><span class="token punctuation">,</span>
     <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StorageV2&quot;</span><span class="token punctuation">,</span>
     <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
       <span class="token property">&quot;supportsHttpsTrafficOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
     <span class="token punctuation">}</span>
   <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
 <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br></div></div><p>and highlighting on SKU we see that we read from the input parameter like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageSKU')]&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p><strong>Deployment</strong>, because our new parameter <code>storageSKU</code> has the <code>defaultValue</code> set, we don't actually need to specify it when we call the <code>--parmameters</code> variable. So the below code looks the same as before:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az deployment group create \
  --name addskuparameter \
  --resource-group myResourceGroup \
  --template-file <span class="token variable">$templateFile</span> \
  --parameters storageName<span class="token operator">=</span><span class="token punctuation">{</span>your-unique-name<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Above if we look at <code>--parameters</code> we are only passing <code>storageName</code>, but</p></li> <li><p><strong>Explicitly pass <code>storageSKU</code></strong>, we could pass the <code>storageSKU</code> as well. Then it would looks like this:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>az deployment group create \
  --name addskuparameter \
  --resource-group myResourceGroup \
  --template-file <span class="token variable">$templateFile</span> \
  --parameters storageName<span class="token operator">=</span><span class="token punctuation">{</span>your-unique-name<span class="token punctuation">}</span> storageSKU<span class="token operator">=</span>Standard_GRS
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Note above how we pass <code>Standard_GRS</code>, one of the values from the <code>allowedValues</code> list.</p></li></ol> <h2 id="template-functions"><a href="#template-functions" aria-hidden="true" class="header-anchor">#</a> Template functions</h2> <p>So far we have been looking at using parameters and supplying the parameter values when calling our Azure CLI script with the <code>--parameters</code> keyword. This might not be enough. Imagine you have a case where you want all deployed resources end up on the same location by default, how would you solve that? You are probably thinking that you can create a parameter for the <code>location</code> and supply that to Azure CLI. That would work.</p> <p>In this case, there is a better way. You can use a template function instead. There are built-in functions that you can invoke. One such function is <code>resourceGroup()</code>. Because you are deploying towards a specific resource group this function will return back an object representing that resource group. To get it's location you can call it like so <code>resourceGroup().location</code>.</p> <h3 id="demo-template-functions"><a href="#demo-template-functions" aria-hidden="true" class="header-anchor">#</a> DEMO - template functions</h3> <ol><li><p>Open up your ARM template .</p></li> <li><p>Locate your <code>parameters</code> section and add the following entry to it:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[resourceGroup().location]&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>We can see above how the method is invoked and the result is assigned to the <code>defaultValue</code> property. Our full ARM template now looks like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token punctuation">{</span>
  <span class="token property">&quot;$schema&quot;</span><span class="token operator">:</span> <span class="token string">&quot;https://schema.management.azure.com/schemas/2019-04-01/deploymentTemplate.json#&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;contentVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;1.0.0.0&quot;</span><span class="token punctuation">,</span>
  <span class="token property">&quot;parameters&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;storageName&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;minLength&quot;</span><span class="token operator">:</span> <span class="token number">3</span><span class="token punctuation">,</span>
      <span class="token property">&quot;maxLength&quot;</span><span class="token operator">:</span> <span class="token number">24</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;storageSKU&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;allowedValues&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
        <span class="token string">&quot;Standard_LRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Standard_GRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Standard_RAGRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Standard_ZRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Premium_LRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Premium_ZRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Standard_GZRS&quot;</span><span class="token punctuation">,</span>
        <span class="token string">&quot;Standard_RAGZRS&quot;</span>
      <span class="token punctuation">]</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span>
    <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;string&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;defaultValue&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[resourceGroup().location]&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token property">&quot;resources&quot;</span><span class="token operator">:</span> <span class="token punctuation">[</span>
    <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;Microsoft.Storage/storageAccounts&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;apiVersion&quot;</span><span class="token operator">:</span> <span class="token string">&quot;2019-04-01&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageName')]&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;location&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('location')]&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;sku&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[parameters('storageSKU')]&quot;</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token property">&quot;kind&quot;</span><span class="token operator">:</span> <span class="token string">&quot;StorageV2&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;properties&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
        <span class="token property">&quot;supportsHttpsTrafficOnly&quot;</span><span class="token operator">:</span> <span class="token boolean">true</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">]</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br></div></div></li></ol> <h2 id="variables"><a href="#variables" aria-hidden="true" class="header-anchor">#</a> Variables</h2> <p>Variables simplify your templates by enabling you to write an expression once and reuse it throughout the template.</p> <p>Example case - The parameter for the storage account name is hard-to-use because you have to provide a unique name. You're probably tired of guessing a unique name. To create a unique name we can use some built-in functions:</p> <ul><li><code>concat()</code>, this function can concatenate two or more strings.</li> <li><code>uniqueString()</code>, this function is capable of generating a unique hash.</li></ul> <p>Combining these two functions you can use them in the following way:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>storagePrefix + unique hash = unique name for a storage account
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>As input value to <code>uniqueString()</code> you could for example use the <code>id</code> of the resource group you are deploying to. To get a hold of that resource group you can call the built-in function <code>resourceGroup()</code>, which returns a full object.</p> <h3 id="demo-variables"><a href="#demo-variables" aria-hidden="true" class="header-anchor">#</a> DEMO variables</h3> <ol><li><p>Open your ARM template add the following section on root level:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;variables&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
  <span class="token property">&quot;uniqueStorageName&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[concat(parameters('storagePrefix'), uniqueString(resourceGroup().id))]&quot;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div></li> <li><p>To use it, locate the <code>resources</code> section and it's first item.</p></li> <li><p>Change the <code>name</code> property of your resource item like so:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;name&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[variables('uniqueStorageName')]&quot;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li> <li><p>Deployment, ensure you set the <code>storagePrefix</code> so that <code>uniqueStorageName</code> has all the dependent parameters set.</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code>az deployment group create \
  --name addnamevariable \
  --resource-group myResourceGroup \
  --template-file $templateFile \
  --parameters storagePrefix=store storageSKU=Standard_LRS
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></li></ol> <p>Note above how the Azure CLI is setting the <code>storagePrefix</code> to <code>store</code> and how we internally in the template let variables and built-in template functions do the rest.</p> <h2 id="output"><a href="#output" aria-hidden="true" class="header-anchor">#</a> Output</h2> <p>You can return values from ARM templates. For example getting the endpoint for a new storage account might be useful. So how would we do that?</p> <h3 id="demo-output"><a href="#demo-output" aria-hidden="true" class="header-anchor">#</a> DEMO - output</h3> <ol><li><p>Open up your ARM template and add an <code>outputs</code> section on root level:</p> <div class="language-json line-numbers-mode"><pre class="language-json"><code><span class="token property">&quot;outputs&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
    <span class="token property">&quot;storageEndpoint&quot;</span><span class="token operator">:</span> <span class="token punctuation">{</span>
      <span class="token property">&quot;type&quot;</span><span class="token operator">:</span> <span class="token string">&quot;object&quot;</span><span class="token punctuation">,</span>
      <span class="token property">&quot;value&quot;</span><span class="token operator">:</span> <span class="token string">&quot;[reference(variables('uniqueStorageName')).primaryEndpoints]&quot;</span>
    <span class="token punctuation">}</span>
  <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>Above we can see we define a return value <code>storageEndpoint</code>. We assign to the property <code>value</code> and we construct that value by calling <code>reference(variables('uniqueStorageName')).primaryEndpoints</code>. What <code>reference()</code> does is to look up a resource that we just created where name equals the value of <code>uniqueStorageName</code>.</p></li> <li><p>Type the following in terminal to run the deployment command:</p> <div class="language-bash line-numbers-mode"><pre class="language-bash"><code>templateFile<span class="token operator">=</span><span class="token string">&quot;&lt;name of your ARM template file&gt;&quot;</span>
  az deployment group create \
  --name output \
  --resource-group arm-demo1 \
  --template-file <span class="token variable">$templateFile</span> \
  --parameters storagePrefix<span class="token operator">=</span>demo
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div></li></ol> <h2 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> Summary</h2> <p>We've covered quite a few topics. The Infrastructure as Code area is a big one. Hopefully you have a grasp of the main idea. It's about ensuring your infrastructure can be expressed as code. You want it to be code so that it's easy to know what you've deployed but also so you can easily do so again and with precision. ARM templates are JSON files and have some great artifacts that help ensures your ARM templates are flexible so they can easily be applied on different environment for example. There's a lot more to know but do have a look at the references section to learn more.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.509e587f.js" defer></script><script src="/assets/js/9.454b5262.js" defer></script><script src="/assets/js/4.eac68367.js" defer></script><script src="/assets/js/132.5905a839.js" defer></script>
  </body>
</html>
