<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Creating a GraphQL Server withÂ Apollo</title>
    <meta name="description" content="[object Object]">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">
    
    <link rel="preload" href="/assets/css/0.styles.23d22851.css" as="style"><link rel="preload" href="/assets/js/app.af1af9d9.js" as="script"><link rel="preload" href="/assets/js/9.454b5262.js" as="script"><link rel="preload" href="/assets/js/4.eac68367.js" as="script"><link rel="preload" href="/assets/js/165.d5b2afe5.js" as="script"><link rel="prefetch" href="/assets/js/1.36663999.js"><link rel="prefetch" href="/assets/js/10.50c128a6.js"><link rel="prefetch" href="/assets/js/100.832843ee.js"><link rel="prefetch" href="/assets/js/101.a0f346f6.js"><link rel="prefetch" href="/assets/js/102.d3a51c53.js"><link rel="prefetch" href="/assets/js/103.42e5967c.js"><link rel="prefetch" href="/assets/js/104.f2848816.js"><link rel="prefetch" href="/assets/js/105.975c7b9f.js"><link rel="prefetch" href="/assets/js/106.d1698fcc.js"><link rel="prefetch" href="/assets/js/107.e66c0625.js"><link rel="prefetch" href="/assets/js/108.84025cf9.js"><link rel="prefetch" href="/assets/js/109.5f1bf948.js"><link rel="prefetch" href="/assets/js/11.a104adc8.js"><link rel="prefetch" href="/assets/js/110.b06025c1.js"><link rel="prefetch" href="/assets/js/111.b728f009.js"><link rel="prefetch" href="/assets/js/112.2f202e84.js"><link rel="prefetch" href="/assets/js/113.30083b82.js"><link rel="prefetch" href="/assets/js/114.a601f1c2.js"><link rel="prefetch" href="/assets/js/115.6413aa2d.js"><link rel="prefetch" href="/assets/js/116.44cdb765.js"><link rel="prefetch" href="/assets/js/117.3fa386ab.js"><link rel="prefetch" href="/assets/js/118.8bd003cb.js"><link rel="prefetch" href="/assets/js/119.1ea9eae7.js"><link rel="prefetch" href="/assets/js/12.02e6e552.js"><link rel="prefetch" href="/assets/js/120.63c1786f.js"><link rel="prefetch" href="/assets/js/121.4f580578.js"><link rel="prefetch" href="/assets/js/122.533a0953.js"><link rel="prefetch" href="/assets/js/123.37bf1483.js"><link rel="prefetch" href="/assets/js/124.92ff020a.js"><link rel="prefetch" href="/assets/js/125.2513705b.js"><link rel="prefetch" href="/assets/js/126.ac7f0ed9.js"><link rel="prefetch" href="/assets/js/127.144659e8.js"><link rel="prefetch" href="/assets/js/128.b1c51db9.js"><link rel="prefetch" href="/assets/js/129.25930a42.js"><link rel="prefetch" href="/assets/js/13.215ad842.js"><link rel="prefetch" href="/assets/js/130.ba23dc59.js"><link rel="prefetch" href="/assets/js/131.02fed567.js"><link rel="prefetch" href="/assets/js/132.ee400e80.js"><link rel="prefetch" href="/assets/js/133.1f0c2bd1.js"><link rel="prefetch" href="/assets/js/134.8942c410.js"><link rel="prefetch" href="/assets/js/135.056c0cd5.js"><link rel="prefetch" href="/assets/js/136.6022a2fc.js"><link rel="prefetch" href="/assets/js/137.45937168.js"><link rel="prefetch" href="/assets/js/138.a9c534e4.js"><link rel="prefetch" href="/assets/js/139.37a778b2.js"><link rel="prefetch" href="/assets/js/14.1a060010.js"><link rel="prefetch" href="/assets/js/140.b40b4810.js"><link rel="prefetch" href="/assets/js/141.bc3e7a66.js"><link rel="prefetch" href="/assets/js/142.17143dc7.js"><link rel="prefetch" href="/assets/js/143.5dd23bb9.js"><link rel="prefetch" href="/assets/js/144.3bc3648b.js"><link rel="prefetch" href="/assets/js/145.ce7f777e.js"><link rel="prefetch" href="/assets/js/146.3d86f6eb.js"><link rel="prefetch" href="/assets/js/147.bf8a0bfa.js"><link rel="prefetch" href="/assets/js/148.6d6dcd45.js"><link rel="prefetch" href="/assets/js/149.8e89a8fe.js"><link rel="prefetch" href="/assets/js/15.34674cd6.js"><link rel="prefetch" href="/assets/js/150.419c0b3b.js"><link rel="prefetch" href="/assets/js/151.1902893c.js"><link rel="prefetch" href="/assets/js/152.fc680915.js"><link rel="prefetch" href="/assets/js/153.786183f8.js"><link rel="prefetch" href="/assets/js/154.30c0db9d.js"><link rel="prefetch" href="/assets/js/155.6a1f1414.js"><link rel="prefetch" href="/assets/js/156.f6a0290f.js"><link rel="prefetch" href="/assets/js/157.7e09af6b.js"><link rel="prefetch" href="/assets/js/158.34e5cfb5.js"><link rel="prefetch" href="/assets/js/159.dc9e63e0.js"><link rel="prefetch" href="/assets/js/16.119e91d4.js"><link rel="prefetch" href="/assets/js/160.45b46a8a.js"><link rel="prefetch" href="/assets/js/161.3545c817.js"><link rel="prefetch" href="/assets/js/162.61db4022.js"><link rel="prefetch" href="/assets/js/163.42fd3ede.js"><link rel="prefetch" href="/assets/js/164.8c253021.js"><link rel="prefetch" href="/assets/js/166.5a4d6a33.js"><link rel="prefetch" href="/assets/js/167.025f9a1f.js"><link rel="prefetch" href="/assets/js/168.dd263cd9.js"><link rel="prefetch" href="/assets/js/169.1cebceae.js"><link rel="prefetch" href="/assets/js/17.780050f1.js"><link rel="prefetch" href="/assets/js/170.eef09a30.js"><link rel="prefetch" href="/assets/js/171.568d00eb.js"><link rel="prefetch" href="/assets/js/172.13bdd851.js"><link rel="prefetch" href="/assets/js/173.ac3523e4.js"><link rel="prefetch" href="/assets/js/174.7a16fba0.js"><link rel="prefetch" href="/assets/js/175.b5970f62.js"><link rel="prefetch" href="/assets/js/176.771f1b60.js"><link rel="prefetch" href="/assets/js/177.86bf5b1e.js"><link rel="prefetch" href="/assets/js/178.9d15da32.js"><link rel="prefetch" href="/assets/js/179.2cb4394d.js"><link rel="prefetch" href="/assets/js/18.fbe87828.js"><link rel="prefetch" href="/assets/js/180.738da0ec.js"><link rel="prefetch" href="/assets/js/181.4770036a.js"><link rel="prefetch" href="/assets/js/182.0a78f9b3.js"><link rel="prefetch" href="/assets/js/183.0c345a9c.js"><link rel="prefetch" href="/assets/js/184.cf15e5be.js"><link rel="prefetch" href="/assets/js/185.1c546640.js"><link rel="prefetch" href="/assets/js/186.d6abcecf.js"><link rel="prefetch" href="/assets/js/187.5ff401b6.js"><link rel="prefetch" href="/assets/js/188.b0882483.js"><link rel="prefetch" href="/assets/js/189.0455c7b7.js"><link rel="prefetch" href="/assets/js/19.910fc8d0.js"><link rel="prefetch" href="/assets/js/190.042d2868.js"><link rel="prefetch" href="/assets/js/191.110498b8.js"><link rel="prefetch" href="/assets/js/192.0a19375a.js"><link rel="prefetch" href="/assets/js/193.bc494463.js"><link rel="prefetch" href="/assets/js/194.f832c37a.js"><link rel="prefetch" href="/assets/js/195.e9a440c0.js"><link rel="prefetch" href="/assets/js/196.c002e70b.js"><link rel="prefetch" href="/assets/js/20.f2e93d17.js"><link rel="prefetch" href="/assets/js/21.710dadb0.js"><link rel="prefetch" href="/assets/js/22.f4b7a74b.js"><link rel="prefetch" href="/assets/js/23.7da86901.js"><link rel="prefetch" href="/assets/js/24.b2baa9f8.js"><link rel="prefetch" href="/assets/js/25.a9fce161.js"><link rel="prefetch" href="/assets/js/26.e3ef402c.js"><link rel="prefetch" href="/assets/js/27.9c9ebb3b.js"><link rel="prefetch" href="/assets/js/28.a55074a2.js"><link rel="prefetch" href="/assets/js/29.13d9e4e3.js"><link rel="prefetch" href="/assets/js/3.970a66a4.js"><link rel="prefetch" href="/assets/js/30.ad0fbce9.js"><link rel="prefetch" href="/assets/js/31.25cf2c1f.js"><link rel="prefetch" href="/assets/js/32.51b88a96.js"><link rel="prefetch" href="/assets/js/33.3cc89912.js"><link rel="prefetch" href="/assets/js/34.9e368969.js"><link rel="prefetch" href="/assets/js/35.2c5a0b70.js"><link rel="prefetch" href="/assets/js/36.e4573f18.js"><link rel="prefetch" href="/assets/js/37.63e8a86e.js"><link rel="prefetch" href="/assets/js/38.1264e174.js"><link rel="prefetch" href="/assets/js/39.94b70e03.js"><link rel="prefetch" href="/assets/js/40.d12fbfe2.js"><link rel="prefetch" href="/assets/js/41.4bb61af4.js"><link rel="prefetch" href="/assets/js/42.6ccb4ffa.js"><link rel="prefetch" href="/assets/js/43.0bd65cf1.js"><link rel="prefetch" href="/assets/js/44.0da39d02.js"><link rel="prefetch" href="/assets/js/45.89a5cd81.js"><link rel="prefetch" href="/assets/js/46.d37e8de5.js"><link rel="prefetch" href="/assets/js/47.3bc4cde3.js"><link rel="prefetch" href="/assets/js/48.ab8e19ae.js"><link rel="prefetch" href="/assets/js/49.f6392227.js"><link rel="prefetch" href="/assets/js/5.d1da013e.js"><link rel="prefetch" href="/assets/js/50.13c266ab.js"><link rel="prefetch" href="/assets/js/51.2cf06978.js"><link rel="prefetch" href="/assets/js/52.56c2b7ed.js"><link rel="prefetch" href="/assets/js/53.4d5b9ce7.js"><link rel="prefetch" href="/assets/js/54.eb903e59.js"><link rel="prefetch" href="/assets/js/55.0b31ff36.js"><link rel="prefetch" href="/assets/js/56.d346ae56.js"><link rel="prefetch" href="/assets/js/57.453c651d.js"><link rel="prefetch" href="/assets/js/58.f7fff5bb.js"><link rel="prefetch" href="/assets/js/59.a537c130.js"><link rel="prefetch" href="/assets/js/6.9bdf2d86.js"><link rel="prefetch" href="/assets/js/60.08da46b5.js"><link rel="prefetch" href="/assets/js/61.883f6c71.js"><link rel="prefetch" href="/assets/js/62.b1e24215.js"><link rel="prefetch" href="/assets/js/63.9898efdc.js"><link rel="prefetch" href="/assets/js/64.0d28ede5.js"><link rel="prefetch" href="/assets/js/65.d2e52c68.js"><link rel="prefetch" href="/assets/js/66.2e6b6c8e.js"><link rel="prefetch" href="/assets/js/67.860a252d.js"><link rel="prefetch" href="/assets/js/68.006a7e36.js"><link rel="prefetch" href="/assets/js/69.f6bbc7ee.js"><link rel="prefetch" href="/assets/js/7.8cd56b2f.js"><link rel="prefetch" href="/assets/js/70.4a3f6622.js"><link rel="prefetch" href="/assets/js/71.fd35d7b5.js"><link rel="prefetch" href="/assets/js/72.c2526cec.js"><link rel="prefetch" href="/assets/js/73.12ae69ce.js"><link rel="prefetch" href="/assets/js/74.c0c7a51b.js"><link rel="prefetch" href="/assets/js/75.25d5902a.js"><link rel="prefetch" href="/assets/js/76.7dc31228.js"><link rel="prefetch" href="/assets/js/77.da0cc43e.js"><link rel="prefetch" href="/assets/js/78.4e9609ce.js"><link rel="prefetch" href="/assets/js/79.986ee003.js"><link rel="prefetch" href="/assets/js/8.6b13a443.js"><link rel="prefetch" href="/assets/js/80.00dfb645.js"><link rel="prefetch" href="/assets/js/81.acd2f5e5.js"><link rel="prefetch" href="/assets/js/82.9cd614f2.js"><link rel="prefetch" href="/assets/js/83.1bec09df.js"><link rel="prefetch" href="/assets/js/84.1e80b79f.js"><link rel="prefetch" href="/assets/js/85.8c792b81.js"><link rel="prefetch" href="/assets/js/86.fd5f6771.js"><link rel="prefetch" href="/assets/js/87.165b1e45.js"><link rel="prefetch" href="/assets/js/88.596bd09a.js"><link rel="prefetch" href="/assets/js/89.5b99d208.js"><link rel="prefetch" href="/assets/js/90.ef8ec74a.js"><link rel="prefetch" href="/assets/js/91.11861aad.js"><link rel="prefetch" href="/assets/js/92.f68b9b5c.js"><link rel="prefetch" href="/assets/js/93.772ba160.js"><link rel="prefetch" href="/assets/js/94.35695a02.js"><link rel="prefetch" href="/assets/js/95.c89696a1.js"><link rel="prefetch" href="/assets/js/96.223a0481.js"><link rel="prefetch" href="/assets/js/97.0ad4d44e.js"><link rel="prefetch" href="/assets/js/98.68b8aba4.js"><link rel="prefetch" href="/assets/js/99.1d4527be.js">
    <link rel="stylesheet" href="/assets/css/0.styles.23d22851.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/" class="nav-link">Home</a></div><div class="nav-item"><a href="/about/" class="nav-link">About</a></div><div class="nav-item"><a href="/author/" class="nav-link">Author</a></div><div class="nav-item"><a href="/articles/" class="nav-link">Blog</a></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>Creating a GraphQL Server withÂ Apollo</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/pages/graphql-apollo.html#resources" class="sidebar-link">Resources</a><ul class="sidebar-sub-headers"></ul></li><li><a href="/pages/graphql-apollo.html#install-and-set-up" class="sidebar-link">Install and setÂ up</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#define-a-schema" class="sidebar-link">Define aÂ schema</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#define-resolvers" class="sidebar-link">Define resolvers</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#start-the-server" class="sidebar-link">Start theÂ server</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#deeper-queries" class="sidebar-link">Deeper queries</a></li><li class="sidebar-sub-header"><a href="/pages/graphql-apollo.html#summary" class="sidebar-link">Summary</a></li></ul></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="creating-a-graphql-server-with-apollo"><a href="#creating-a-graphql-server-with-apollo" aria-hidden="true" class="header-anchor">#</a> Creating a GraphQL Server withÂ Apollo</h1> <p><img src="https://cdn-images-1.medium.com/max/1600/1*zhVHPUEyp_x3wpba3IWQCg.jpeg" alt="">
Follow me on <a href="https://twitter.com/chris_noring" target="_blank" rel="noopener noreferrer">Twitter<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>, happy to take your suggestions on topics or improvements /Chris</p> <p>This article is part of a series on GraphQL:</p> <ul><li><a href="https://dev.to/softchris/building-a-graphql-server-with-nodejs-andexpress-5hfh" target="_blank" rel="noopener noreferrer">Building a GraphQL server using Node.js and Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>Building a GraphQL server using Node.js and the Apollo Framework, <strong>we are here</strong></li> <li><a href="https://dev.to/softchris/consuming-an-apollo-graphql-server-usingreact-3kk4" target="_blank" rel="noopener noreferrer">Consuming an Apollo GraphQL server using React<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <blockquote><p>GraphQL is a new way we can use to build APIs. One of its prominent features is content-negotiation, a way for the client to tell the backend exactly what fields it needs and at what depth. This enables you to get a smaller payload of data back, which can really make a difference on a bad network connection.</p></blockquote> <p>Apollo is an entire platform for handling the backend as well as the client-side when using GraphQL and can even help you in the cloud. Itâ€™s well worth checking out <a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">here<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>.</p> <p>This article will be about how to create a GraphQL server using Apollo and thus only using a small part of what the Apollo platform can do. As you will see itâ€™s pretty easy. I hope you enjoy the readÂ ðŸ˜ƒ</p> <p>In this article we will cover:</p> <ul><li><strong>Install and set up</strong>, we will learn how to install <code>apollo-graphql</code> and <code>graphql</code> libraries needed to created our server</li> <li><strong>Define a schema and resolvers</strong>, a Schema is needed to describe our types. Resolvers are functions that are invoked to handle queries from the user.</li> <li><strong>Debugging</strong>, when we start our server we can do so in a debug mode so we get a browser page we can interact with and that will help us send our queries to our server and it will also show us the results</li></ul> <h2 id="resources"><a href="#resources" aria-hidden="true" class="header-anchor">#</a> Resources</h2> <p>Some of the below links are introductory so you can learn more after having read this article and some are more advanced once you feel you've grasped Graphql better.</p> <ul><li><a href="https://www.apollographql.com/" target="_blank" rel="noopener noreferrer">Apollo project landing page<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/tutorial/schema.html" target="_blank" rel="noopener noreferrer">Building a schema<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/tutorial/resolvers.html" target="_blank" rel="noopener noreferrer">How to write Resolvers for your server<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://www.apollographql.com/docs/apollo-server/v1/servers/azure-functions.html" target="_blank" rel="noopener noreferrer">Using GraphQL with Azure Functions<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://azure.microsoft.com/en-us/blog/use-graphql-with-hasura-and-azure-database-for-postgresql/?wt.mc_id=personal-blog-chnoring" target="_blank" rel="noopener noreferrer">Using GraphQL on Azure generally<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h2 id="install-and-set-up"><a href="#install-and-set-up" aria-hidden="true" class="header-anchor">#</a> Install and setÂ up</h2> <p>To create a GraphQL server using Apollo Server we need to do three things:</p> <ol><li><strong>install</strong> <code>apollo-server</code> and <code>graphql</code></li> <li><strong>define</strong> a schema</li> <li><strong>define</strong> resolvers</li></ol> <p>Letâ€™s install the needed dependencies:</p> <pre name="bed8" id="bed8" class="graf graf--pre graf-after--p">npm install --save apollo-server graphql</pre> <p>Once we have done that we are able to proceed with the next steps.</p> <h3 id="define-a-schema"><a href="#define-a-schema" aria-hidden="true" class="header-anchor">#</a> Define aÂ schema</h3> <p>To define a schema we need to be using a function called <code>gql</code> that allows us to define a schema like a multiline template string and most importantly using the GraphQL query language.</p> <p>First, we import <code>gql</code>:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Next up we can start defining the schema itself:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token string">`
  type Query {
    products: [Product]
    product(id: Int!): Product
  }
  type Product {
    id: Int,
    name: String,
    description: String
  }
  input ProductInput {
    name: String,
    description: String
  }
  type Mutation {
    login(email: String): String # token
    createProduct(product: ProductInput)
  }
`</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><p>Finally, we export the schema for later usage</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> typeDefs<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>The full file should now look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> gql <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> gql<span class="token template-string"><span class="token string">`
  type Query {
    products: [Product]
    product(id: Int!): Product
  }
  type Product {
    id: Int,
    name: String,
    description: String
  }
  input ProductInput {
    name: String,
    description: String
  }
  type Mutation {
    login(email: String!): String # token
    createProduct(product: ProductInput): String
  }
`</span></span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> typeDefs<span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><h3 id="define-resolvers"><a href="#define-resolvers" aria-hidden="true" class="header-anchor">#</a> Define resolvers</h3> <p>Next up we need to define what the following queries and mutations should do:</p> <ul><li><strong>products</strong>, this should return a list of products</li> <li><strong>product(id: Int!)</strong>, this should return one product</li> <li><strong>login(email: String)</strong>, this should log in the user</li> <li><strong>createProduct(product: ProductInput)</strong>, this should create a product</li></ul> <p>Letâ€™s start a new file <code>resolvers.js</code>. At this point, we will keep things simple and have some local static data but we could improve this server by having it call a database or an API. So letâ€™s define some static data at the top:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Now that Apollo server expects a certain type of object back with the following shape:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>Not the two keywords <code>Query</code> and <code>Mutation</code> above. These two are objects and we need to define each corresponding resolver function. Letâ€™s start by adding a resolver function for products:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getProducts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>A comment on <code>getProducts()</code> method is that we return a <code>Promise</code>. Now, we could return our <code>products</code> list directly but this is just a way to showcase that we can return an asynchronous response as well, which means this will fit well with us talking to a 3rd party API or doing a lookup on a database. To go along with our <code>Promise</code> response we mark it with <code>async</code> in our return object.</p> <h4 id="define-a-resolver-function-with-a-parameter"><a href="#define-a-resolver-function-with-a-parameter" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver function with a parameter</strong></h4> <p>Weâ€™ve learned how to define a resolver function, and now letâ€™s look at how we can grab a parameter from the user request and query our backend based on it.</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">getProductById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Above we added <code>product</code> to our <code>Query</code> object and as you can see we can quite easily dig out the <code>id</code> from the user request.</p> <h4 id="define-a-resolver-function-for-a-mutation"><a href="#define-a-resolver-function-for-a-mutation" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver function for aÂ mutation</strong></h4> <p>To define resolvers for mutations we need to introduce a <code>Mutation</code> property on our exported object, just like we needed to introduce <code>Query</code>. So now our code should look like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><p>Note the addition of <code>Mutation</code> above.</p> <p>The next step is to add our <code>createProduct</code> property and a resolver function that handles that, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token function-variable function">createProduct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newId <span class="token operator">=</span> products<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token punctuation">:</span> products<span class="token punctuation">[</span>products<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  products <span class="token operator">=</span> <span class="token punctuation">[</span> â€¦products<span class="token punctuation">,</span> <span class="token punctuation">{</span> â€¦product<span class="token punctuation">,</span> id<span class="token punctuation">:</span> newId<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>â€˜successâ€™<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">createProduct</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product      <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h4 id="putting-it-all-together"><a href="#putting-it-all-together" aria-hidden="true" class="header-anchor">#</a> <strong>Putting it allÂ together</strong></h4> <p>Now we have defined a set of resolver functions, letâ€™s have a look at the resulting code in its entirety:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> products <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> <span class="token function-variable function">getProducts</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>products<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">getProductById</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> productId <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>product<span class="token punctuation">.</span><span class="token function">find</span><span class="token punctuation">(</span><span class="token parameter">p</span> <span class="token operator">=&gt;</span> p<span class="token punctuation">.</span>id <span class="token operator">===</span> productId<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">const</span> <span class="token function-variable function">createProduct</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">const</span> newId <span class="token operator">=</span> products<span class="token punctuation">.</span>length <span class="token operator">===</span> <span class="token number">0</span> <span class="token operator">?</span> <span class="token number">1</span><span class="token punctuation">:</span> products<span class="token punctuation">[</span>products<span class="token punctuation">.</span>length<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">.</span>id <span class="token operator">+</span> <span class="token number">1</span><span class="token punctuation">;</span>
  products <span class="token operator">=</span> <span class="token punctuation">[</span> â€¦products<span class="token punctuation">,</span> <span class="token punctuation">{</span> â€¦product<span class="token punctuation">,</span> id<span class="token punctuation">:</span> newId<span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>â€˜successâ€™<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">products</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> getProducts<span class="token punctuation">,</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProductById</span><span class="token punctuation">(</span><span class="token punctuation">{</span> productId<span class="token punctuation">:</span> id <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">createProduct</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">createProduct</span><span class="token punctuation">(</span><span class="token punctuation">{</span> product   <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p>As you can see we have only operated on static data but we could easily switch those calls to target a database or a 3rd party API, thatâ€™s entirely up to you. As long as you remember to use the <code>await</code> keyword in your resolver definition you are good to go with interacting with anything return a <code>Promise</code>.</p> <h3 id="start-the-server"><a href="#start-the-server" aria-hidden="true" class="header-anchor">#</a> <strong>Start theÂ server</strong></h3> <p>We have defined a schema and a set of resolver functions. Now letâ€™s import <code>schema.js</code> and <code>resolvers.js</code> and kick off our server:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> <span class="token punctuation">{</span> ApolloServer <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;apollo-server&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> typeDefs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./schema&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> resolvers <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">&quot;./resolvers&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> server <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ApolloServer</span><span class="token punctuation">(</span><span class="token punctuation">{</span> typeDefs<span class="token punctuation">,</span> resolvers <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

server<span class="token punctuation">.</span><span class="token function">listen</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> url <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token template-string"><span class="token string">`ðŸš€ Server ready at </span><span class="token interpolation"><span class="token interpolation-punctuation punctuation">${</span>url<span class="token interpolation-punctuation punctuation">}</span></span><span class="token string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h4 id="debug"><a href="#debug" aria-hidden="true" class="header-anchor">#</a> <strong>Debug</strong></h4> <p>Navigate to <code>http://localhost:4000</code> â€”</p> <p>you should have something looking like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*p374DSjbjXIiYTCvMk74Jw.png" alt=""></p> <p>As you can see this looks very much like the GraphiQL environment we presented in the chapter <a href="https://medium.com/@noringc/building-a-graphql-server-with-node-js-and-express-f8ea78e831f9" target="_blank" rel="noopener noreferrer">GraphQL + Node.js Express<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a>. The idea is the same. On your left you have an area where you can enter <code>queries</code> and <code>mutations</code> and on your right is the results area. On the bottom left is a<code>variables</code> area that allows you to specify input variables that you can use the top left pane.</p> <h4 id="example-usage"><a href="#example-usage" aria-hidden="true" class="header-anchor">#</a> <strong>Example usage</strong></h4> <p>Letâ€™s try to create a <code>query</code>. We can do so in two ways:</p> <ul><li><strong>using</strong> the no-keyword version, <code>{}</code></li> <li><strong>using</strong> the keyword <code>query</code></li></ul> <p>The first variant looks like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*DCPCUlM32UN2be354dIpRw.png" alt=""></p> <p>As you can see above we are only using <code>{}</code> to specify our query and then we query for a resource <code>launches</code> and drills down into the resource to get the columns that we need, i.e <code>mission</code> and under <code>mission</code> we grab the column <code>name</code>.</p> <p>Letâ€™s try to use the other query variant next by using the keyword <code>query</code>. The keyword query allows us to:</p> <ul><li><strong>Name</strong> the query so we can refer to it later</li> <li><strong>Specify more than one query</strong> in the same window, so we can choose which one we want at a given point in time</li> <li><strong>Specify a parameter</strong> for our query ( we will show this one in our next example )</li></ul> <p><img src="https://cdn-images-1.medium.com/max/1600/1*ZbQt75zef5UsHosMzp7aHg.png" alt=""></p> <p>Above we managed to specify two different queries and have given them the name <code>LaunchesNameOnly</code> and <code>LaunchesAll</code>. While specifying the <code>LaunchesAll</code> query you can see how our environment helps us by indicating the type of <code>isBooked</code>, that we are about to select. The type is a <code>Boolean!</code>, a mandatory <code>Boolean</code>.</p> <p>In our next example we show how you hit the large <code>play</code> button and is given the choice between different queries, as you can see it is a really great idea to define your queries with the keyword <code>query</code> so to create some order in your testing environment:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*3AobV3zHEwTwKOP7chtvBA.png" alt=""></p> <p>Below is simply the result of executing our query</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*c9KDNGt2b_q8Oi_NhL137Q.png" alt=""></p> <p>Letâ€™s try to use variables next and see how we can declare those in the bottom left area and use them in our <code>queries</code> and <code>mutations</code>.</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*WvXIYtoB8q2uYtun3ag6tA.png" alt=""></p> <p>Above we have defined <code>OneLaunch</code> that takes a parameter <code>$id</code>. Thereafter this parameter <code>$id</code> is passed down to our actual query expression like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>launch(id: $id) {
  mission {
    name
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><p>Now, we are ready to invoke our query, with a parameter and we simply hit the play button and we get this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*_qAKfxncxFN9wl24BvManw.png" alt=""></p> <p>The reason we get the above is that it read from the bottom left are that looks like this:</p> <p><img src="https://cdn-images-1.medium.com/max/1600/1*pKhKeGOIdkQG95B_tO5OiA.png" alt=""></p> <p>Variables in this area is all made up of one object and we simply add keys to this object when we need a new parameter like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  &quot;id&quot;: 1,
  &quot;otherparam&quot;: &quot;some value&quot;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="deeper-queries"><a href="#deeper-queries" aria-hidden="true" class="header-anchor">#</a> <strong>Deeper queries</strong></h3> <p>One of the big selling points of GraphQL is the ability to query deep into a hierarchy, like so:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  orders {
    created,
    createdBy {
      name,
      created
    },
    items {
      product {
        name
      },
      price
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Above we are querying on the resource <code>orders</code> and as you can see we are able to perform a lot of subqueries and query for <code>orders-&gt;items-&gt;product</code>. If we were to do that with SQL, it would be quite difficult with a lot of <code>JOINS</code>. So how are we able to construct this in GraphQL?</p> <p>In short, we need to do two things:</p> <ul><li><strong>define</strong> a resolver to the asked for subtype</li> <li><strong>store</strong> the data in a <em>resolvable</em> format. This means we need to store the data as an <code>id/ids</code> rather than the full object</li></ul> <h4 id="store-the-data-as-id-ids"><a href="#store-the-data-as-id-ids" aria-hidden="true" class="header-anchor">#</a> <strong>Store the data asÂ id/ids</strong></h4> <p>We need to store an order like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> orders <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  items<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
<span class="token punctuation">}</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h4 id="define-a-resolver-for-a-subtype"><a href="#define-a-resolver-for-a-subtype" aria-hidden="true" class="header-anchor">#</a> <strong>Define a resolver for aÂ subtype</strong></h4> <p>How this is done syntactically depends on the GraphQL server implementation we are dealing with. In this case, we are dealing with Apollo, so letâ€™s look at how Apollo handles it. We know that when we define a resolver object in Apollo it looks like this:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><p>Now, our querying for <code>orders</code> means we are interested in querying for all its columns like <code>created</code> but also for a complex column like <code>items</code> and even <code>items -&gt; product</code> so we can ask a query like this:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>{
  orders {
    created,
    items {
      product {
        name
      },
      price
    }
  }
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div><p>So how do we resolve <code>items</code>? Well letâ€™s have a look at our schema definition of an order:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>type Order {
  created: Date;
  items: [Item]
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>With this in mind letâ€™s head back to our resolver object and now we will add a <code>Order</code> type to like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Order <span class="token punctuation">{</span>
    <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Letâ€™s zoom into our addition:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>Order <span class="token punctuation">{</span>
  <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><p>Here we can see that we are resolving what happens if someone queries for <code>items</code>. We are missing the <code>getItems()</code> method though so letâ€™s define that:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> itemsList <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> â€˜itemâ€™
<span class="token punctuation">}</span><span class="token punctuation">,</span>
<span class="token punctuation">{</span>
  id<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
  name<span class="token punctuation">:</span> â€˜item2â€™
<span class="token punctuation">}</span><span class="token punctuation">]</span>

<span class="token keyword">const</span> <span class="token function-variable function">getItems</span> <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token parameter">items</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  <span class="token keyword">return</span> Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>itemsList<span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>Ok, so that deals with <code>items</code> so how do we deal with <code>items-&gt;product</code>. Well, that one is quite simple, we just again look at our schema:</p> <div class="language- line-numbers-mode"><pre class="language-text"><code>type OrderItem {
  price: Double;
  product: Product;
}
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><p>We see now that we need to add <code>OrderItem</code> to our resolver object, like so:</p> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token punctuation">{</span>
  Query<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token function-variable function">orders</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrders</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
    <span class="token function-variable function">order</span><span class="token punctuation">:</span> <span class="token keyword">async</span> <span class="token punctuation">(</span><span class="token parameter">_<span class="token punctuation">,</span> <span class="token punctuation">{</span> id <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getOrder</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Mutation<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    <span class="token comment">// add mutation resolvers here</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  Order <span class="token punctuation">{</span>
    <span class="token function-variable function">items</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> items <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getItems</span><span class="token punctuation">(</span>items<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  OrderItem <span class="token punctuation">{</span>
    <span class="token function-variable function">product</span><span class="token punctuation">:</span> <span class="token punctuation">(</span><span class="token parameter"><span class="token punctuation">{</span> product <span class="token punctuation">}</span></span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token function">getProduct</span><span class="token punctuation">(</span>product<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="summary"><a href="#summary" aria-hidden="true" class="header-anchor">#</a> <strong>Summary</strong></h3> <p>We have covered</p> <ul><li><strong>Installing</strong> <code>apollo-server</code> and <code>graphql</code>, in order to have the necessary dependencies to create an apollo server.</li> <li><strong>Defined</strong> a <code>schema</code> and a set of <code>resolvers</code>.</li> <li><strong>Booted up our server</strong>,</li> <li><strong>Explored</strong> the visual environment that allows us to run queries or mutations</li></ul> <p>Moving on we will look at different ways to consume said server using <code>apollo-client</code> so stay tuned for that.</p></div> <footer class="page-edit"><!----> <!----></footer> <!----> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.af1af9d9.js" defer></script><script src="/assets/js/9.454b5262.js" defer></script><script src="/assets/js/4.eac68367.js" defer></script><script src="/assets/js/165.d5b2afe5.js" defer></script>
  </body>
</html>
